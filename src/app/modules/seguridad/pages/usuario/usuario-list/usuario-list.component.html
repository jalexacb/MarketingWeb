<h5>Usuarios</h5>
<div class="row"> 
  <div class="col-md-4">
    <div id="main-search" class="main-search open">
      
      <div class="input-group">
        <span class="input-group-prepend" >
          <i class="feather icon-search input-group-text"></i>
        </span>
        <input type="text" id="m-search" class="form-control" name="busqueda" [(ngModel)]="busqueda" (keyup.backspace)="onKeyBackSpace()" (keyup)="onSearch()" placeholder=" BÃºsqueda . . ." [style.width]="'50px'">
        
      </div>
    </div>
  </div>
  <div class="col-md-2 ml-auto">
    <button type="button" class="btn btn-primary" *ngIf="permiso.crear" (click)="onCreate()" ngbTooltip="btn-primary">Crear Usuario</button>
  </div>
</div>
      
<br>

<div class="row">
    <div class="col-sm-12">
      <app-card [options]="false" [hidHeader]="true">
        <table class="table table-hover">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col" sortable="usuario" (sort)="onSort($event)">Usuario</th>
            <th scope="col" sortable="usuario" (sort)="onSort($event)">Rol</th>
            <th scope="col" sortable="apellidos" (sort)="onSort($event)">Apellidos</th>
            <th scope="col" sortable="nombres" (sort)="onSort($event)">Nombres</th>
            
            <th scope="col" sortable="status" (sort)="onSort($event)">Estado</th>
            <th></th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let usuario of usuarios; let i = index;"
              [ngClass]="{'danger-table': usuario.status === 'I'}"
          >
            <th scope="row">{{ i+1 }}</th>
            <td>
              {{usuario.usuario}}
            </td>
            <td><span class="badge m-r-5 badge-pill badge-info">{{  usuario.rol.nombre }}</span></td>
            <td>{{usuario.apellidos}}</td>
            <td>{{usuario.nombres}}</td>
            
            <td>{{usuario.status=='A' ? 'Activo' : 'Inactivo'}}</td>
            <td>
              <div class="btn-group mb-2 mr-2" ngbDropdown [placement]="'bottom-right'">
                  <button class="btn btn-icon" ngbDropdownToggle type="button"><i class="icon feather icon-more-vertical"></i></button>
                  <div ngbDropdownMenu>
                    <a class="dropdown-item" type="button"  *ngIf="permiso.editar" (click)="onEdit(usuario)" href="javascript:"><i class="icon feather icon-edit"></i> Editar</a>
                    <a *ngIf="usuario.status === 'A' && permiso.eliminar" class="dropdown-item" type="button"  (click)="onDelete(usuario)" href="javascript:"><i class="icon feather icon-trash"></i> Eliminar</a>
                    <a *ngIf="usuario.status === 'I' && permiso.eliminar" class="dropdown-item" type="button" (click)="onActivar(usuario)" href="javascript:"><i class="icon feather icon-check-square"></i> Activar</a>
                  </div>
              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </app-card>
    </div>

</div>

<div style="float: right;">
  
  <ngb-pagination [collectionSize]="collectionSize"  (pageChange)="onSearch($event)" [(page)]="advancePage" [maxSize]="3" [pageSize]="per_page" [boundaryLinks]="true"></ngb-pagination>
  
</div>

  