<ngx-spinner type = "ball-clip-rotate-pulse"></ngx-spinner>
<h5>Eventos</h5>
<div class="row"> 
  <div class="col-md-4">
    <div id="main-search" class="main-search open">
      
      <div class="input-group">
        <span class="input-group-prepend" >
          <i class="feather icon-search input-group-text"></i>
        </span>
        <input type="text" id="m-search" class="form-control" name="busqueda" [(ngModel)]="busqueda" (keyup.backspace)="onKeyBackSpace()" (keyup)="onSearch()" placeholder=" Búsqueda . . ." [style.width]="'50px'">
        
      </div>
    </div>
  </div>
  <div class="col-md-2 ml-auto">
    <button type="button" class="btn btn-primary"  (click)="onCreate()">Crear evento</button>
  </div>
</div>
      
<br>

<div class="row">
    <div class="col-sm-12">
      <app-card [options]="false" [hidHeader]="true">
        <table class="table table-hover">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th>Campaña</th>
            <th>Fecha inicio</th>
            <th>Fecha fin</th>
           
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let eventoCampania of eventosCampanias; let i = index;"
              [ngClass]="{'danger-table': eventoCampania.status === 'I'}"
          >
            <th>{{ i+1 }}</th>
            <td>{{  eventoCampania?.campania?.nombre }}</td>
            <td>
              {{eventoCampania.fecha_inicio}}
            </td>
            <td>{{eventoCampania.fecha_fin}}</td>
            
          </tr>
          </tbody>
        </table>
      </app-card>
    </div>

</div>
<div class="row">
  <div class="col-sm-12">
    <div style="float: right;">
  
      <ngb-pagination [collectionSize]="collectionSize"  (pageChange)="onSearch($event)" [(page)]="advancePage" [maxSize]="3" [pageSize]="per_page" [boundaryLinks]="true"></ngb-pagination>
      
    </div>
  </div>
</div>


<div class="row text-center">
  <div class="col-md-4">
    <div class="btn-group">
      <div
        class="btn btn-primary"
        mwlCalendarPreviousView
        [view]="view"
        [(viewDate)]="viewDate"
        (viewDateChange)="closeOpenMonthViewDay()"
      >
        Anterior
      </div>
      <div
        class="btn btn-outline-secondary"
        mwlCalendarToday
        [(viewDate)]="viewDate"
      >
        Hoy
      </div>
      <div
        class="btn btn-primary"
        mwlCalendarNextView
        [view]="view"
        [(viewDate)]="viewDate"
        (viewDateChange)="closeOpenMonthViewDay()"
      >
        Siguiente
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'es' }}</h3>
  </div>
  <div class="col-md-4">
    <div class="btn-group">
      <div
        class="btn btn-primary"
        (click)="setView(CalendarView.Month)"
        [class.active]="view === CalendarView.Month"
      >
        Mensual
      </div>
      <div
        class="btn btn-primary"
        (click)="setView(CalendarView.Week)"
        [class.active]="view === CalendarView.Week"
      >
        Semanal
      </div>
      <div
        class="btn btn-primary"
        (click)="setView(CalendarView.Day)"
        [class.active]="view === CalendarView.Day"
      >
        Diario
      </div>
    </div>
  </div>
</div>
<br />
<app-card [options]="false" [hidHeader]="true">
  <div [ngSwitch]="view">
    <mwl-calendar-month-view
      *ngSwitchCase="CalendarView.Month"
      [locale]="locale"
      [viewDate]="viewDate"
      [events]="events"
      [refresh]="refresh"
      [activeDayIsOpen]="activeDayIsOpen"
      (dayClicked)="dayClicked($event.day)"
      (eventClicked)="handleEvent('Clicked', $event.event)"
      (eventTimesChanged)="eventTimesChanged($event)"
    >
    </mwl-calendar-month-view>
    <mwl-calendar-week-view
      *ngSwitchCase="CalendarView.Week"
      [locale]="locale"
      [viewDate]="viewDate"
      [events]="events"
      [refresh]="refresh"
      (eventClicked)="handleEvent('Clicked', $event.event)"
      (eventTimesChanged)="eventTimesChanged($event)"
    >
    </mwl-calendar-week-view>
    <mwl-calendar-day-view
      *ngSwitchCase="CalendarView.Day"

      [locale]="locale"
      [viewDate]="viewDate"
      [events]="events"
      [refresh]="refresh"
      (eventClicked)="handleEvent('Clicked', $event.event)"
      (eventTimesChanged)="eventTimesChanged($event)"
    >
    </mwl-calendar-day-view>
  </div>
</app-card>
  